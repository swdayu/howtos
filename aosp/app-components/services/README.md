
# 服务
- [服务基础](./basics.md)
- [绑定的服务](./bound-services.md)
- [接口定义语言](./aidl.md)

------------------------------------------------

服务是没有用户界面可以长时间运行在后台的应用组件。
其他应用组件可以启动服务使其在后台持续运行，不管用户是否已经切换到其他应用上；
其他组件也可以绑定服务与其交互，甚至执行进程间通信。
例如，服务可以在后台执行网络事务、播放音乐、执行文件操作、或与内容提供者交互。

服务一般有两种形式：
- 启动的服务：其他组件`startService()`来启动服务，启动的服务会持续执行，即使启动它的组件已经销毁了。
  通常，启动的服务会执行一个单一的操作，并且不会将结果返回给调用者，例如从网络下载文件或上传文件到网络。
  当对应的操作执行完，服务应该将自己终止。
- 绑定的服务：其他组件`bindService()`来绑定服务。
  绑定的服务允许其他组件与其交互，例如发送请求、获取结果、或执行进程间通信。
  绑定的服务的生存期和与它交互的组件的生存期相同。
  多个组件可以绑定到同一个服务，当这些组件解绑之后，系统自动终止服务的运行。

一个服务支持同时被其他组件启动和绑定，只需实现对应的回调函数`onStartCommand()`和`onBind()`。
其他组件使用服务的方式与使用Activity相同，都通过Intent进行组件之间的沟通。
但可以在服务的Menifest文件中将服务声明为私有，禁止其他应用组件对其进行访问。

注意的是，服务默认运行在当前进程的主线程中，服务不会创建自己的线程、也不会运行在隔离的进程中（除非你明确指定）。
因此，如果服务执行的是CPU繁忙或阻塞式操作（例如MP3播放或网络操作），应该创建新的线程让服务工作在新线程中。
这样可以避免应用响应延迟，因为应用主线程可以保持活动持续响应用户请求。
